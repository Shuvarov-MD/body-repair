{"version":3,"sources":["closePopup.js","createOptions.js","maskPhone.js","sendForm.js","showCallback.js","showRequest.js","showThanks.js"],"names":["popupWrapper","document","querySelectorAll","forEach","item","addEventListener","event","target","matches","closest","classList","remove","contains","key","querySelector","createOptions","modelOption","getElementById","yearOption","disabled","fetch","method","headers","Content-Type","then","response","status","Error","text","data","JSON","parse","option","createElement","add","textContent","brand","setAttribute","appendChild","innerHTML","value","model","year","error","console","maskPhone","selector","masked","arguments","length","undefined","mask","keyCode","template","def","replace","val","this","i","newValue","a","charAt","indexOf","slice","reg","substr","RegExp","test","type","_step","_iterator","_createForOfIteratorHelper","s","n","done","elem","err","e","f","sendForm","form","statusMessage","button","inputs","buttonText","formData","preventDefault","style","borderColor","FormData","Object","fromEntries","body","stringify","showThanks","setTimeout","outline","callback","showCallback","heroButton","showRequest","popupThanks"],"mappings":"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","file":"main.min.js","sourcesContent":["const popupWrapper = document.querySelectorAll('.popup__wrapper');\r\n\r\npopupWrapper.forEach(item => {\r\n  item.addEventListener('click', event => {\r\n    if (event.target.matches('.popup__close') || !event.target.closest('.popup__content')) {\r\n      item.classList.remove('popup__wrapper--active');\r\n    }\r\n  });\r\n});\r\n\r\ndocument.addEventListener('keydown', event => {\r\n  document.querySelectorAll('.popup__wrapper--active').forEach(item => {\r\n    if (item.classList.contains('popup__wrapper--active') && event.key === 'Escape') {\r\n      document.querySelector('.popup__wrapper--active').classList.remove('popup__wrapper--active');\r\n    }\r\n  });\r\n});\r\n","const createOptions = () => {\r\n  const modelOption = document.getElementById('model'),\r\n    yearOption = document.getElementById('year');\r\n\r\n  modelOption.disabled = true;\r\n  yearOption.disabled = true;\r\n\r\n  const createResponse = () => fetch('../db/cars.json', {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': \"application/json\"\r\n    }\r\n  });\r\n\r\n  const createOptionBrand = data => {\r\n    data.forEach(item => {\r\n      const option = document.createElement('option');\r\n      option.classList.add('option');\r\n      option.textContent = item.brand;\r\n      option.setAttribute('value', item.brand);\r\n      document.getElementById('brand').appendChild(option);\r\n    });\r\n  };\r\n\r\n\r\n  const createOptionModel = data => {\r\n    data.forEach(item => {\r\n      const option = document.createElement('option');\r\n      option.classList.add('option');\r\n      option.textContent = item;\r\n      option.setAttribute('value', item);\r\n      modelOption.appendChild(option);\r\n    });\r\n  };\r\n\r\n  const createOptionYear = data => {\r\n    data.forEach(item => {\r\n      const option = document.createElement('option');\r\n      option.classList.add('option');\r\n      option.textContent = item;\r\n      option.setAttribute('value', item);\r\n      yearOption.appendChild(option);\r\n    });\r\n  };\r\n\r\n  createResponse().then(response => {\r\n    if (response.status !== 200) {\r\n      throw new Error('status network not 200');\r\n    }\r\n    response.text().then(data => {\r\n      data = JSON.parse(data);\r\n      createOptionBrand(data);\r\n\r\n      document.getElementById('brand').addEventListener('change', event => {\r\n        modelOption.disabled = false;\r\n        yearOption.disabled = false;\r\n\r\n        modelOption.innerHTML = `\r\n          <option value=\"\" class=\"option\" disabled selected>Выберите модель</option>`;\r\n        yearOption.innerHTML = `\r\n        <option value=\"\" class=\"option\" disabled selected>Выберите год</option>`;\r\n\r\n        data.forEach(item => {\r\n          if (event.target.value === item.brand) {\r\n            createOptionModel(item.model);\r\n            createOptionYear(item.year);\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }).catch(error => {\r\n    console.error(error);\r\n  });\r\n};\r\n\r\ncreateOptions();\r\n","function maskPhone(selector, masked = '+7 (___) ___-__-__') {\r\n  const elems = document.querySelectorAll(selector);\r\n\r\n  function mask(event) {\r\n    const keyCode = event.keyCode;\r\n    const template = masked,\r\n      def = template.replace(/\\D/g, \"\"),\r\n      val = this.value.replace(/\\D/g, \"\");\r\n    let i = 0,\r\n      newValue = template.replace(/[_\\d]/g, a => (i < val.length ? val.charAt(i++) || def.charAt(i) : a));\r\n    i = newValue.indexOf(\"_\");\r\n    if (i !== -1) {\r\n      newValue = newValue.slice(0, i);\r\n    }\r\n    let reg = template.substr(0, this.value.length).replace(/_+/g,\r\n      a => \"\\\\d{1,\" + a.length + \"}\").replace(/[+()]/g, \"\\\\$&\");\r\n    reg = new RegExp(\"^\" + reg + \"$\");\r\n    if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) {\r\n      this.value = newValue;\r\n    }\r\n    if (event.type === \"blur\" && this.value.length < 5) {\r\n      this.value = \"\";\r\n    }\r\n  }\r\n\r\n  for (const elem of elems) {\r\n    elem.addEventListener(\"input\", mask);\r\n    elem.addEventListener(\"focus\", mask);\r\n    elem.addEventListener(\"blur\", mask);\r\n  }\r\n}\r\n\r\nmaskPhone('input[type=\"tel\"]');\r\n","const sendForm = () => {\r\n  const form = document.querySelectorAll('form'),\r\n    statusMessage = document.createElement('div'),\r\n    modelOption = document.getElementById('model'),\r\n    yearOption = document.getElementById('year');\r\n\r\n  statusMessage.innerHTML = `\r\n    <div class='sk-bounce-1 sk-child'></div>\r\n    <div class='sk-bounce-2 sk-child'></div>\r\n    <div class='sk-bounce-3 sk-child'></div>`;\r\n\r\n  const postData = formData => fetch('../php/server.php', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(formData)\r\n  });\r\n\r\n  form.forEach(item => {\r\n    const button = item.querySelector('button[type=\"submit\"]'),\r\n      inputs = item.querySelectorAll('input');\r\n\r\n    item.addEventListener('input', event => {\r\n      if (event.target.matches('input[name$=\"--name\"]')) {\r\n        event.target.value = event.target.value.replace(/[^А-ЯЁа-яё\\s]/, '');\r\n      }\r\n    });\r\n\r\n    item.addEventListener('submit', event => {\r\n      event.preventDefault();\r\n\r\n      if (item.querySelector('input[type=\"tel\"]').value.length === 18) {\r\n        const buttonText = button.textContent;\r\n        button.textContent = '';\r\n        button.appendChild(statusMessage);\r\n        statusMessage.classList.add('sk-three-bounce');\r\n\r\n        item.querySelector('input[type=\"tel\"]').style.borderColor = '';\r\n\r\n        let formData = new FormData(item);\r\n        formData = Object.fromEntries(formData);\r\n\r\n        postData(formData).then(response => {\r\n          if (response.status !== 200) {\r\n            throw new Error('status network not 200');\r\n          } else if (item.closest('.popup__wrapper--active')) {\r\n            item.closest('.popup__wrapper--active').classList.remove('popup__wrapper--active');\r\n          }\r\n\r\n          showThanks();\r\n          statusMessage.classList.remove('sk-three-bounce');\r\n          button.textContent = buttonText;\r\n        }).catch(error => {\r\n          console.error(error);\r\n          button.textContent = 'Ошибка...';\r\n\r\n          setTimeout(() => {\r\n            button.textContent = buttonText;\r\n          }, 2000);\r\n        });\r\n\r\n        inputs.forEach(item => {\r\n          item.value = '';\r\n        });\r\n\r\n        item.querySelector('input[type=\"tel\"]').style.outline = '';\r\n\r\n        if (item.classList.contains('request__form')) {\r\n          item.querySelector('.textarea').value = '';\r\n          item.querySelector('select#brand').value = '';\r\n\r\n          modelOption.innerHTML = `\r\n            <option value=\"\" class=\"option\" disabled selected>Выберите модель</option>`;\r\n          yearOption.innerHTML = `\r\n            <option value=\"\" class=\"option\" disabled selected>Выберите год</option>`;\r\n\r\n          modelOption.disabled = true;\r\n          yearOption.disabled = true;\r\n        }\r\n      } else {\r\n        item.querySelector('input[type=\"tel\"]').style.outline = '2px solid red';\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nsendForm();\r\n","const callback = document.querySelectorAll('.callback');\r\n\r\nconst showCallback = event => {\r\n  event.preventDefault();\r\n  const popupCallback = document.querySelector('.popup__content--callback');\r\n\r\n  popupCallback.closest('.popup__wrapper').classList.add('popup__wrapper--active');\r\n};\r\n\r\ncallback[0].addEventListener('click', showCallback);\r\ncallback[1].addEventListener('click', showCallback);","const heroButton = document.querySelector('.hero__button');\r\n\r\nconst showRequest = () => {\r\n  const quickRequest = document.querySelector('.popup__content--quick-request');\r\n\r\n  quickRequest.closest('.popup__wrapper').classList.add('popup__wrapper--active');\r\n};\r\n\r\nheroButton.addEventListener('click', showRequest);\r\n","function showThanks() {\r\n  const popupThanks = document.querySelector('.popup__content--thanks');\r\n\r\n  popupThanks.closest('.popup__wrapper').classList.add('popup__wrapper--active');\r\n\r\n  setTimeout(() => {\r\n    popupThanks.closest('.popup__wrapper').classList.remove('popup__wrapper--active');\r\n  }, 3000);\r\n}\r\n"]}